<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Patients</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body class="bg-light py-4">

<div class="container">
  <h1 class="mb-4 text-primary">Patients</h1>

  <form method="POST" action="{{ url_for('delete_patients') }}">
    <div class="table-responsive">
      <table class="table table-bordered table-striped align-middle">
        <thead class="table-dark">
          <tr>
            <th>Select</th>
            <th>Name</th>
            <th>Details</th>
            <th>Case</th>
            <th>Description</th>
            <th>First Session</th>
            <th>Next Session</th>
            <th>Total Fees</th>
            <th>Paid Fees</th>
            <th>Remaining Fees</th>
          </tr>
        </thead>
        <tbody>
          {% for row in data %}
          <tr>
            <td><input class="form-check-input" type="checkbox" name="delete_ids" value="{{ row[0] }}"></td>
            <td>{{ row[1] }}</td>
            <td class="text-wrap" style="max-width: 200px;">{{ row[2] }}</td>
            <td>{{ row[3] }}</td>
            <td class="text-wrap" style="max-width: 200px;">{{ row[4] }}</td>
            <td>{{ row[5] }}</td>
            <td>{{ row[6] }}</td>
            <td>${{ row[7] }}</td>
            <td>${{ row[8] }}</td>
            <td>${{ (row[7] | float) - (row[8] | float) }}</td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
    <button type="submit" class="btn btn-danger">Delete Selected Patients</button>
  </form>

  <div class="mt-4 d-flex justify-content-between">
    <a href="{{ url_for('add_new') }}" class="btn btn-success">Add New Patient</a>

    <form method="POST" action="{{ url_for('edit_patient') }}" class="d-flex">
      <input type="text" name="patient_name" class="form-control me-2" placeholder="Patient Name" required>
      <button type="submit" class="btn btn-warning">Edit</button>
    </form>
    
  </div>
  <a href="{{ url_for('calendar') }}" class="btn btn-info mt-3">View Calendar</a>
</div>


</body>
</html>
